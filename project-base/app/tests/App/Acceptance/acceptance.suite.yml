# Codeception Test Suite Configuration

# suite for acceptance tests.
# perform tests in browser using the WebDriver or PhpBrowser.
# If you need both WebDriver and PHPBrowser tests - create a separate suite.

actor: AcceptanceTester
modules:
    config:
        Tests\App\Test\Codeception\Module\Db:
            dsn: 'pgsql:host=%DATABASE_HOST%;port=%DATABASE_PORT%;dbname=%DATABASE_NAME%'
            user: '%DATABASE_USER%'
            password: '%DATABASE_PASSWORD%'
            dump: var/cache/test-db-dump.sql
            populate: true
            cleanup: true
            populator: 'PGPASSWORD=$password pg_restore -U $user -h $host -d $dbname $dump' # see https://codeception.com/docs/modules/Db.html#Populator
        Tests\App\Test\Codeception\Module\StrictWebDriver:
            host: '%SELENIUM_SERVER_HOST%'
            port: 4444
            url: ~
            browser: firefox
            capabilities:
                # accept untrusted (eg. self-signed) HTTPS certificates
                acceptSslCerts: true
            window_size: 1366x768
            wait: 1
    enabled:
        - Tests\App\Test\Codeception\Helper\CloseNewlyOpenedWindowsHelper
        # SymfonyHelper enables using Symfony DI container.
        - Tests\App\Test\Codeception\Helper\SymfonyHelper
        - Tests\App\Test\Codeception\Helper\WebDriverHelper
        - Tests\App\Test\Codeception\Module\Db
        - Tests\App\Test\Codeception\Module\StrictWebDriver
        # DomainHelper sets WebDriver's URL in _before().
        # The setting is reset before _before() of WebDriver is called,
        # so DomainHelper must be included after WebDriver.
        - Tests\App\Test\Codeception\Helper\DomainHelper
        - Tests\App\Test\Codeception\Helper\LocalizationHelper
        - Tests\App\Test\Codeception\Helper\NumberFormatHelper
