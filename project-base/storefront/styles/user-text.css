@import 'tailwindcss';
@import './theme.css';
@import './fonts.css';
@import './base.css';
@import './utilities.css';
@import './custom.css';
@import './grapesjs.css';

@layer components {
    .user-text {
        @apply text-text-default text-lg leading-relaxed;

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            @apply font-secondary font-semibold;

            &:first-child {
                @apply mt-0;
            }
        }

        h2 {
            @apply text-3xl;
            @apply mt-10 mb-5 lg:mt-12 lg:mb-6;
        }

        h3 {
            @apply text-2xl;
            @apply mt-8 mb-4 lg:mt-10 lg:mb-5;
        }

        h4 {
            @apply text-xl;
            @apply mt-6 mb-3 lg:mt-8 lg:mb-4;
        }

        h5 {
            @apply text-lg;
            @apply mt-5 mb-3 lg:mt-6 lg:mb-3;
        }

        h6 {
            @apply text-lg tracking-normal normal-case;
            @apply mt-4 mb-2 lg:mt-5 lg:mb-3;
        }

        p {
            @apply mb-6 text-lg lg:mb-8 lg:text-lg;
        }

        a {
            @apply text-link-default underline transition-colors duration-200;

            &:hover {
                @apply text-link-hovered;
            }

            &:active {
                @apply text-link-hovered;
            }
        }

        strong,
        b {
            @apply font-bold;
        }

        em,
        i {
            @apply italic;
        }

        hr {
            @apply border-border-default my-8 border-0 border-t lg:my-10;
        }

        ul {
            @apply mb-6 ml-10 list-outside list-["•\0020"] space-y-3 lg:mb-8;

            li {
                @apply marker:text-border-brand marker:text-xl;
            }

            ul {
                @apply my-2 list-outside list-["◦\0020"] space-y-3;

                ul {
                    @apply list-outside list-["▪\0020"] space-y-3;
                }
            }
        }

        ol {
            @apply mb-6 ml-10 list-outside list-decimal space-y-3 lg:mb-8;

            ol {
                @apply my-2 list-outside list-decimal space-y-3;

                ol {
                    @apply list-outside list-decimal space-y-3;
                }
            }

            ul {
                @apply my-2 space-y-3;

                ul {
                    @apply space-y-3;
                }
            }
        }

        img {
            @apply my-8 block h-auto max-w-full lg:my-10;
        }

        iframe {
            @apply my-8 max-w-full lg:my-10;

            &:empty {
                @apply min-h-52 w-full bg-emerald-100;
            }
        }

        iframe:not(.gjs-iframe) {
            @apply my-8 aspect-video w-full lg:my-10;

            &:empty {
                @apply min-h-52 w-full bg-emerald-100;
            }
        }

        video {
            @apply my-8 w-full lg:my-10;
        }

        .gjs-table-custom {
            @apply my-8 max-w-full overflow-x-auto lg:my-10;
        }

        .gjs-button-link {
            @apply my-3 block h-fit w-fit cursor-pointer items-center justify-center gap-2 rounded-lg border-2 text-center leading-[18px] font-medium no-underline transition-all outline-none hover:no-underline;
            @apply border-button-primary-border-default bg-button-primary-bg-default !text-button-primary-text-default [&>div]:!text-button-primary-text-default px-3 py-[7px];
            @apply hover:border-button-primary-border-hovered hover:bg-button-primary-bg-hovered hover:text-button-primary-text-hovered;
        }

        table {
            @apply w-full;

            tr {
                @apply odd:bg-table-bg-contrast;
            }

            td,
            th {
                @apply p-2.5 text-base leading-6;
            }

            th {
                @apply text-text-default text-left font-bold;
                @apply lg:text-xl;
            }

            &.secondary {
                @apply border-table-bg-default border;

                tr {
                    @apply first:bg-table-bg-contrast bg-[transparent] first:[&_td]:font-bold;
                }

                td {
                    @apply border-table-bg-default border text-left;
                }
            }
        }

        .row {
            @apply my-8 flex w-full flex-col gap-5 lg:my-10 lg:flex-row lg:gap-10;

            .column {
                @apply flex flex-1 flex-col;

                h2:first-child,
                h3:first-child,
                h4:first-child,
                h5:first-child,
                h6:first-child {
                    @apply mt-0;
                }

                * > *:last-child {
                    @apply mb-0;
                }

                &:empty {
                    @apply min-h-7 bg-emerald-100;
                }
            }

            img {
                @apply !my-0 max-w-fit;
            }
        }

        .image-position-left,
        .button-link-position-left {
            @apply ml-0;
        }

        .image-position-center,
        .button-link-position-center {
            @apply !mx-auto;
        }

        .image-position-right,
        .button-link-position-right {
            @apply !ml-auto;
        }

        .gjs-text-with-image {
            @apply my-8 flex w-full flex-col items-center justify-between gap-5 lg:my-10 lg:flex-row lg:gap-10;

            & > * {
                @apply lg:w-1/2 lg:max-w-1/2;
            }

            &.gjs-text-with-image-float-left {
                & img {
                    @apply lg:order-1;
                }

                & .text {
                    @apply lg:order-2;
                }
            }

            &.gjs-text-with-image-float-right {
                & img {
                    @apply lg:order-2;
                }

                & .text {
                    @apply lg:order-1;
                }
            }

            img {
                @apply m-0;
            }

            h2:first-child,
            h3:first-child,
            h4:first-child,
            h5:first-child,
            h6:first-child {
                @apply mt-0;
            }

            * > *:last-child {
                @apply mb-0;
            }
        }

        .grid {
            @apply grid grid-cols-12 gap-1 py-1;

            .grid__item {
                &.grid__item--1 {
                    @apply col-span-full;
                }

                &.grid__item--1-2 {
                    @apply col-span-6;
                }

                &.grid__item--1-3 {
                    @apply col-span-4;
                }

                &.grid__item--2-3 {
                    @apply col-span-8;
                }
            }
        }

        .gjs-link-block {
            @apply my-8 block lg:my-10;

            &:empty {
                @apply min-h-52 w-full bg-emerald-100;
            }
        }
    }
}

/* Safari iframe drag-drop fix: 6px gap enables "below" drop zone detection */
@supports (hanging-punctuation: first) and (font: -apple-system-body) and (-webkit-appearance: none) {
    [data-gjs-type='map'] iframe,
    iframe[src*='maps.google.com'] {
        height: calc(100% - 6px) !important;
    }
}
